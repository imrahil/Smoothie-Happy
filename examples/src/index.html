<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>{$title} - v{$version}</title>
        <link rel="icon" href="../favicon.ico" />
        <meta name="description" content="{$description}" />
        <link rel="stylesheet" type="text/css" href="styles.css" />
        <link rel="stylesheet" type="text/css" href="../vendor/prism/prism.css" />
    </head>
    <body>
        <div>
            {$options} <button>Run</button> <strong>Open the console <small>[ Ctrl + Shift + I ]</small> to see all messages !</strong>
        </div>
        <pre><code id="source" class="language-javascript"></code></pre>
        <pre><code id="result" class="language-json"></code></pre>
        <script src="../vendor/es6-promise.auto.min.js?v=4.0.3"></script>
        <script src="../dist/sh.js?v={$version}&amp;b={$build}"></script>
        <script src="../vendor/prism/prism.js"></script>
        {$scripts}
        <script>
            var select = document.querySelector('select');
            var button = document.querySelector('button');
            var source = document.querySelector('#source');
            var result = document.querySelector('#result');

            var _console = window.console;

            window.console = {
                call: function(type, args) {
                    args = Array.prototype.slice.apply(args);
                    _console[type].apply(_console, args);
                    var text = JSON.stringify(args, function (k, v) {
  if (k[0] !== '_'){
    return v;
  }
}, '    ');
                    var html = Prism.highlight(text, Prism.languages.json);
                    result.innerHTML += '\n' + html;
                    result.innerHTML += '\n\n -----\n';
                },
                debug: function() { this.call('debug', arguments); },
                log  : function() { this.call('log'  , arguments); },
                info : function() { this.call('info' , arguments); },
                warn : function() { this.call('warn' , arguments); },
                error: function() { this.call('error', arguments); }
            };

            select.addEventListener('change', function() {
                var example = window[select.value];
                if (example) {
                    var text  = example.toString();
                    var lines = text.split('\n');
                        lines = lines.slice(1, lines.length - 1);
                        text  = lines.join('\n').replace(/\t/gm, '');
                    var html  = Prism.highlight(text, Prism.languages.javascript);
                    source.innerHTML = html;
                }
            }, false);

            button.addEventListener('click', function() {
                var example = window[select.value];
                result.innerHTML = '';
                example && example();
            }, false);

            select.dispatchEvent(new Event('change'));
        </script>
    </body>
</html>
