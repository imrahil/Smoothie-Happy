<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: C:/wamp/www/Git/Smoothie-Happy/src/smoothie-happy.js</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":true}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html"></a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="sh">
            <span class="title">
                <a href="sh.html">sh</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="sh.description"><a href="sh.html#.description">description</a></li>
            
                <li data-name="sh.link"><a href="sh.html#.link">link</a></li>
            
                <li data-name="sh.name"><a href="sh.html#.name">name</a></li>
            
                <li data-name="sh.version"><a href="sh.html#.version">version</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="sh.network">
            <span class="title">
                <a href="sh.network.html">sh.network</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="sh.network.timeout"><a href="sh.network.html#.timeout">timeout</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="sh.network.get"><a href="sh.network.html#.get">get</a></li>
            
                <li data-name="sh.network.post"><a href="sh.network.html#.post">post</a></li>
            
                <li data-name="sh.network.request"><a href="sh.network.html#.request">request</a></li>
            
                <li data-name="sh.network.upload"><a href="sh.network.html#.upload">upload</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="C__wamp_www_Git_Smoothie-Happy_src_smoothie-happy.js.html">Source: C:/wamp/www/Git/Smoothie-Happy/src/smoothie-happy.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source "><code>/**
 * Smoothie-Happy global namespace.
 * @namespace
 */
var sh = sh || {};

 (function () {
    'use strict';

    /** @property {String} */
    sh.version = '0.0.1-alpha';

    /** @property {String} */
    sh.name = 'Smoothie Happy';

    /** @property {String} */
    sh.description = 'Smoothieware network communication API.';

    /** @property {String} */
    sh.link = 'https://github.com/lautr3k/Smoothie-Happy';

    /**
     * Network module.
     * @namespace
     */
    sh.network = {
        /**
         * @property {Integer} timeout Default timeout for all request (ms).
         * @default  5000
         */
        timeout: 5000
    };

    /**
     * XMLHttpRequest wrapper.
     * @method sh.network.request
     * @param {String}  type             'GET' or 'POST'.
     * @param {String}  url              URL with protocol.
     * @param {Object}  settings         Request settings.
     * @param {Mixed}   settings.data    Data to send with the request.
     * @param {Object}  settings.headers Headers to send with the request.
     * @param {Object}  settings.options {XMLHttpRequest} properties/methods to overwrite.
     * @return {XMLHttpRequest}
     */
    sh.network.request = function(type, url, settings) {
        // force type to uppercase
        type = type.toUpperCase();

        // defaults settings
        settings = settings || {};

        var data     = settings.data    || null;
        var headers  = settings.headers || {};
        var options  = settings.options || settings;

        // http request object
        var xhr = new XMLHttpRequest();

        // open the request
        xhr.open(type, url, true);

        // set default xhr properties
        options.timeout = options.timeout || this.timeout;

        // set user xhr properties
        for (var key in options) {
            if (key === 'upload') {
                for (var event in options[key]) {
                    if (xhr.upload[event] !== undefined) {
                        xhr.upload[event] = options[key][event];
                    }
                }
            }
            else if (xhr[key] !== undefined) {
                xhr[key] = options[key];
            }
        }

        // append data to url on GET request
        if (type === 'GET' &amp;&amp; data) {
            url += data;
            data = null;
        }

        // set custom headers
        for (var key in headers) {
            xhr.setRequestHeader(key, headers[key]);
        }

        // send the request
        xhr.send(type === 'POST' ? data : null);

        // return the request object
        return xhr;
    };

    /**
     * GET request.
     * @method sh.network.get
     * @param  {String}  url       URL with protocol.
     * @param  {Object}  settings  See "{@link sh.network.request}.settings" for possible settings values.
     * @return {XMLHttpRequest}
     */
    sh.network.get = function(url, settings) {
        return this.request('GET', url, settings);
    };

    /**
     * POST request.
     * @method sh.network.post
     * @param  {String}  url       URL with protocol.
     * @param  {Object}  settings  See "{@link sh.network.request}.settings" for possible settings values.
     * @return {XMLHttpRequest}
     */
    sh.network.post = function(url, settings) {
        return this.request('POST', url, settings);
    };

    /**
     * Upload a file on the sd card.
     * @method sh.network.upload
     * @param  {String}       ip        Board ip.
     * @param  {Object|File}  file      {File} object or an {Object} with "name" and "data" properties set.
     * @param  {Object}       settings  See "{@link sh.network.request}.settings" for possible settings values.
     * @return {XMLHttpRequest}
     */
    sh.network.upload = function(ip, file, settings) {
        // defaults settings
        settings = settings || {};

        // file is a string, convert to Blob
        if (typeof file === 'string') {
            file = new Blob([file], { 'type': 'text/plain' });
        }

        // file is a File or Blob object, wrap it...
        if (file instanceof File || file instanceof Blob) {
            file = {
                name: file.name,
                data: file
            }
        }

        // set file data
        settings.data = file.data;

        // set file name header
        settings.headers = { 'X-Filename': file.name };

        // send the command as post request
        return this.post('http://' + ip + '/upload', settings);
    };

})();
</code></pre>
        </article>
    </section>






        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Mon Apr 18 2016 19:07:25 GMT+0200 (Europe de l’Ouest (heure d’été))
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
